import{r as f,d as b,i as v,p as y,c as a,a as s,t as n,F as g,e as _,q as k,b as l,v as i,s as u,w,u as x,o as d}from"./index-DMLsZpC_.js";import{a as N}from"./orderService-Bn115e8d.js";const V={class:"container"},h={class:"row g-5"},M={class:"col-md-5 col-lg-4 order-md-last"},S={class:"mb-3"},L={class:"badge bg-primay rounded-pill align-middle"},U={class:"items list-group mb-3"},I={class:"p-3 list-group-item d-flex justify-content-between"},B={class:"my-0"},F={class:"text-muted"},P={class:"border p-4 bg-light h5 rounded text-center total-price"},j={class:"col-md-7 col-lg-8"},D={class:"row g-3"},O={class:"col-12"},R={class:"col-12 pt-1"},T={class:"my-3"},q={class:"form-check"},C={class:"form-check"},E={key:0,class:"pt-1"},G={__name:"OrderForm",setup($){const p=x(),o=f({items:[],form:{name:"",address:"",payment:"card",cardNumber:"",itemIds:[]}}),c=async()=>{o.form.payment!=="card"&&(o.form.cardNumber=""),o.form.itemIds=o.items.map(e=>e.itemId);const r=await N(o.form);if(r===void 0||r.status!==200){alert("에러 발생");return}const t=["주문이 완료되었습니다."];if(o.form.payment==="bank"){const e=m.value.toLocaleString();t.push(`한국은행 123-456-777 계좌로 ${e}원을 입금해주시기 바랍니다.`)}alert(t.join(`
`)),await p.push("/")};b(async()=>{const r=await v();r===void 0||r.status!==200||(o.items=r.data)});const m=y(()=>o.items.reduce((t,e)=>t+(e.price-e.price*e.discountPer*.01),0).toLocaleString());return(r,t)=>(d(),a("form",{class:"forder-form",onSubmit:w(c,["prevent"])},[s("div",V,[t[15]||(t[15]=s("div",{class:"py-5 text-center"},[s("div",{class:"h4"},[s("b",null,"주문하기")]),s("p",{class:"h6 font-lg mt-3"},"주문 내역을 확인하시고 주문하기 버튼을 클릭해 주세요.")],-1)),s("div",h,[s("div",M,[s("div",S,[t[5]||(t[5]=s("span",{class:"h5 mb-3 align-middle me-2"},[s("b",null,"구입 목록")],-1)),s("span",L,n(o.items.length),1)]),s("ul",U,[(d(!0),a(g,null,_(o.items,e=>(d(),a("li",I,[s("div",null,[s("h6",B,n(e.name),1)]),s("span",F,n((e.price-e.price*e.discountPer/100).toLocaleString())+"원 ",1)]))),256))]),s("div",P,[t[6]||(t[6]=s("span",null,"합계 ",-1)),s("b",null,n(m.value.toLocaleString())+"원",1)]),t[7]||(t[7]=s("button",{class:"w-100 btn btn-primary py-4 mt-4"},"결제하기",-1))]),s("div",j,[t[13]||(t[13]=s("div",{class:"h5 mb-3"},[s("b",null,"주문자 정보")],-1)),s("div",D,[s("div",O,[t[8]||(t[8]=s("label",{for:"name",class:"form-label"},"이름",-1)),l(s("input",{type:"text",class:"form-control p-3",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.form.name=e)},null,512),[[i,o.form.name]])]),s("div",R,[t[9]||(t[9]=s("label",{for:"address",class:"form-label"},"주소",-1)),l(s("input",{type:"text",class:"form-control p-3",id:"address","onUpdate:modelValue":t[1]||(t[1]=e=>o.form.address=e)},null,512),[[i,o.form.address]])])]),t[14]||(t[14]=s("div",{class:"h5 mt-5 mb-3"},[s("b",null,"결제 수단")],-1)),s("div",T,[s("div",q,[l(s("input",{id:"card",name:"paymentMethod",type:"radio",class:"form-check-input",value:"card","onUpdate:modelValue":t[2]||(t[2]=e=>o.form.payment=e)},null,512),[[u,o.form.payment]]),t[10]||(t[10]=s("label",{for:"card"},"신용카드",-1))]),s("div",C,[l(s("input",{id:"bank",name:"paymentMethod",type:"radio",class:"form-check-input",value:"bank","onUpdate:modelValue":t[3]||(t[3]=e=>o.form.payment=e)},null,512),[[u,o.form.payment]]),t[11]||(t[11]=s("label",{for:"bank"},"무통장입금",-1))])]),o.form.payment==="card"?(d(),a("div",E,[t[12]||(t[12]=s("label",{for:"cardNum",class:"form-label"},"카드 번호",-1)),l(s("input",{type:"text",class:"form-control p-3",id:"cardNum","onUpdate:modelValue":t[4]||(t[4]=e=>o.form.cardNumber=e)},null,512),[[i,o.form.cardNumber]])])):k("",!0)])])])],32))}};export{G as default};
